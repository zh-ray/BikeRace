<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"> <!-- 声明文件的字符集为 UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- 添加视口声明，适配移动设备 -->
    <title>自行车赛事日历</title>
    <link rel="stylesheet" href="styles.css"> <!-- 引入样式表 -->
    <link rel="icon" href="favicon.png" type="image/png"> <!-- 添加网站图标 -->
</head>
<body>
    <h1>自行车赛事日历</h1>
    <h2>泛长三角地区</h2>
    <h3>业余可报名</h3>

    <!-- 添加小字 -->
    <p style="font-size: 12px; color: #cc1a1a; margin-top: 10px; font-family: Arial, sans-serif;">
        *具体赛事章程以官方为准,补录名额请关注赛事官方通知
    </p>

    <div style="margin-bottom: 20px;">
        <button id="toggleViewButton"
            style="padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">
            切换到卡片视图
        </button>
    </div>

    <div style="overflow-x: auto;">
        <table>
            <thead>
                <tr style="background-color: #f2f2f2;">
                    <th>赛事简称</th>
                    <th>赛事名称</th>
                    <th>赛事地点</th>
                    <th>赛事时间</th>
                    <th>赛事里程</th>
                    <th>报名时间</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <!-- 动态生成的表格内容 -->
            </tbody>
        </table>
    </div>

    <!-- 卡片展示区域 -->
    <div class="card-container"></div>

    <!-- 分页控件 -->
    <div id="pagination" style="text-align: center; margin-top: 20px;"></div>

    <h3 style="margin-top: 40px;">留言区域（如有补充，欢迎留言）</h3>
    <form id="feedbackForm" style="margin-top: 20px; font-family: Arial, sans-serif;" onsubmit="submitMessage(event)">
        <textarea id="message" name="message" rows="5" required
            style="width: 100%; padding: 8px; margin-bottom: 16px; border: 1px solid #ddd; border-radius: 4px;"></textarea>

        <button type="submit"
            style="padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">提交留言</button>
    </form>

    <script>
        async function submitMessage(event) {
            event.preventDefault();

            const body = new URLSearchParams({ message: document.getElementById('message').value });

            try {
                const response = await fetch('https://www.246738.xyz/api/form/', {
                    method: 'POST',
                    body,
                });

                alert('留言已提交！');
                document.getElementById('feedbackForm').reset();
            } catch (error) {
                console.error('Error:', error);
                alert('提交失败，请稍后再试。');
            }
        }
    </script>
    <script src="addRace.js"></script>
</body>
</html>
